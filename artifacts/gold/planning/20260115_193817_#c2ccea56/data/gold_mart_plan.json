{
  "silver_run_id": "20260115_193817_#c2ccea56",
  "gold_layer_objective": "Create integrated and enriched Gold-layer Data Marts to support KPI monitoring, customer segmentation, product and regional performance analysis, and decision-making for retention, returns, and sales optimization.",
  "recommended_marts": [
    {
      "name": "gold_dim_customer",
      "type": "dim",
      "priority": "mandatory",
      "depends_on": [
        "cst_info.csv",
        "CST_AZ12.csv",
        "LOC_A101.csv"
      ],
      "grain": "One row per customer",
      "primary_keys": [
        "cst_id"
      ],
      "measures": [],
      "dimensions": [
        "cst_key",
        "cst_firstname",
        "cst_lastname",
        "cst_marital_status",
        "cst_gndr",
        "cst_create_date",
        "CID",
        "BDATE",
        "GEN",
        "CNTRY"
      ],
      "notes": [
        "Integrate customer demographic and location data from multiple silver tables.",
        "Use CID to join CST_AZ12 and LOC_A101 for enriched demographics and geography.",
        "Ensure consistent customer identifiers and handle any duplicates or mismatches."
      ]
    },
    {
      "name": "gold_dim_product",
      "type": "dim",
      "priority": "mandatory",
      "depends_on": [
        "prd_info.csv",
        "PX_CAT_G1V2.csv"
      ],
      "grain": "One row per product",
      "primary_keys": [
        "prd_id"
      ],
      "measures": [
        "prd_cost"
      ],
      "dimensions": [
        "prd_key",
        "prd_nm",
        "prd_line",
        "prd_start_dt",
        "prd_end_dt",
        "ID",
        "CAT",
        "SUBCAT",
        "MAINTENANCE"
      ],
      "notes": [
        "Join product master info with product category metadata for full product attributes.",
        "Use prd_key and ID to link product and category tables.",
        "Track product lifecycle dates for time-based analysis."
      ]
    },
    {
      "name": "gold_dim_location",
      "type": "dim",
      "priority": "optional",
      "depends_on": [
        "LOC_A101.csv"
      ],
      "grain": "One row per customer location",
      "primary_keys": [
        "CID"
      ],
      "measures": [],
      "dimensions": [
        "CNTRY"
      ],
      "notes": [
        "Location dimension based on customer country from LOC_A101.",
        "Supports regional sales and marketing analysis.",
        "May be expanded with more granular geography if available."
      ]
    },
    {
      "name": "gold_fact_sales",
      "type": "fact",
      "priority": "mandatory",
      "depends_on": [
        "sales_details.csv",
        "gold_dim_customer",
        "gold_dim_product"
      ],
      "grain": "One row per sales order line",
      "primary_keys": [
        "sls_ord_num"
      ],
      "measures": [
        "sls_sales",
        "sls_quantity",
        "sls_price"
      ],
      "dimensions": [
        "sls_prd_key",
        "sls_cust_id",
        "sls_order_dt",
        "sls_ship_dt",
        "sls_due_dt"
      ],
      "notes": [
        "Fact table capturing detailed sales transactions.",
        "Keys link to customer and product dimensions for enriched analysis.",
        "Dates stored as integers, consider date conversion in downstream processing."
      ]
    },
    {
      "name": "gold_agg_exec_kpis",
      "type": "agg",
      "priority": "mandatory",
      "depends_on": [
        "gold_fact_sales",
        "gold_dim_customer"
      ],
      "grain": "Aggregated at monthly and customer segment level",
      "primary_keys": [
        "period",
        "customer_segment"
      ],
      "measures": [
        "Conversion Rate",
        "Customer Lifetime Value",
        "Return Rate",
        "Average Order Value",
        "Customer Retention Rate"
      ],
      "dimensions": [
        "period",
        "customer_segment"
      ],
      "notes": [
        "Aggregate key KPIs for executive dashboards and performance monitoring.",
        "Customer segments derived from segmentation features (demographics, behavior).",
        "Requires integration of returns data if available for Return Rate calculation."
      ]
    },
    {
      "name": "gold_agg_product_performance",
      "type": "agg",
      "priority": "mandatory",
      "depends_on": [
        "gold_fact_sales",
        "gold_dim_product"
      ],
      "grain": "Aggregated at product and category level monthly",
      "primary_keys": [
        "prd_id",
        "period"
      ],
      "measures": [
        "Total Sales",
        "Total Quantity Sold",
        "Return Rate"
      ],
      "dimensions": [
        "prd_line",
        "CAT",
        "SUBCAT"
      ],
      "notes": [
        "Supports analysis of product sales trends and return issues by category.",
        "Return Rate calculation assumes availability of return data or proxy.",
        "Useful for product management and finance decisions."
      ]
    },
    {
      "name": "gold_agg_geo_performance",
      "type": "agg",
      "priority": "mandatory",
      "depends_on": [
        "gold_fact_sales",
        "gold_dim_location",
        "gold_dim_product"
      ],
      "grain": "Aggregated at country and product category level monthly",
      "primary_keys": [
        "CNTRY",
        "CAT",
        "period"
      ],
      "measures": [
        "Total Sales",
        "Total Quantity Sold"
      ],
      "dimensions": [
        "CNTRY",
        "CAT"
      ],
      "notes": [
        "Enables regional sales performance analysis and marketing budget adjustments.",
        "Assumes product categories linked to sales via product dimension.",
        "Supports investigation of regional differences in sales."
      ]
    },
    {
      "name": "gold_wide_sales_enriched",
      "type": "wide",
      "priority": "optional",
      "depends_on": [
        "gold_fact_sales",
        "gold_dim_customer",
        "gold_dim_product",
        "gold_dim_location"
      ],
      "grain": "One row per sales order line enriched with customer, product, and location attributes",
      "primary_keys": [
        "sls_ord_num"
      ],
      "measures": [
        "sls_sales",
        "sls_quantity",
        "sls_price"
      ],
      "dimensions": [
        "cst_id",
        "cst_key",
        "cst_marital_status",
        "cst_gndr",
        "BDATE",
        "GEN",
        "CNTRY",
        "prd_id",
        "prd_key",
        "prd_nm",
        "prd_line",
        "CAT",
        "SUBCAT"
      ],
      "notes": [
        "Wide fact table for advanced analytics and ML feature engineering.",
        "Joins multiple dimensions to sales fact; may be resource-intensive.",
        "Optional due to complexity and potential data volume."
      ]
    }
  ],
  "risks": [
    "Potential data mismatches or missing links between customer IDs across tables.",
    "Date fields in sales_details are integers and may require conversion for time-based analysis.",
    "Return data is not explicitly present; Return Rate calculations may need proxy or additional data sources.",
    "Wide sales enriched table may be large and complex to maintain and query efficiently."
  ],
  "assumptions": [
    "Customer and product keys are consistent and can be reliably joined across tables.",
    "Sales data covers the last 12 months and is representative for KPI calculations.",
    "Location data at country level is sufficient for regional performance analysis.",
    "Returns correlate with discount usage and product categories as per business assumptions."
  ],
  "next_steps": [
    "Perform structural exploratory data analysis on silver tables to validate joins and data quality.",
    "Develop KPI calculation logic and build executive dashboards based on aggregated marts.",
    "Prepare segmentation and clustering feature tables using enriched customer and sales data.",
    "Validate and enrich return data sources to enable accurate Return Rate metrics.",
    "Assess performance and storage implications of wide sales enriched mart before production."
  ]
}
